<!-- templates/comedor/admin/listar_imagenes.html -->
{% extends 'comedor/admin/base_admin.html' %}

{% block admin_content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="page-title mb-0">
        <i class="bi bi-images me-2"></i>
        Gestionar Imágenes del Carrusel
    </h3>
    <a href="{% url 'crear_imagen' %}" class="btn btn-primary">
        <i class="bi bi-plus-circle me-2"></i>
        Agregar Nueva
    </a>
</div>

{% if messages %}
{% for message in messages %}
<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{% endfor %}
{% endif %}

<div class="content-card">
    {% if imagenes %}
    <div class="table-responsive">
        <table class="table table-hover align-middle">
            <thead class="table-light">
            <tr>
                <th width="100">Imagen</th>
                <th>Título</th>
                <th>Día</th>
                <th width="80" class="text-center">Orden</th>
                <th width="100" class="text-center">Estado</th>
                <th width="150" class="text-center">Acciones</th>
            </tr>
            </thead>
            <tbody>
            {% for imagen in imagenes %}
            <tr>
                <td>
                    <img src="{{ imagen.imagen.url }}" alt="{{ imagen.titulo }}" class="img-thumbnail-preview">
                </td>
                <td>
                    <strong>{{ imagen.titulo }}</strong>
                    {% if imagen.descripcion %}
                    <br>
                    <small class="text-muted">{{ imagen.descripcion|truncatewords:10 }}</small>
                    {% endif %}
                </td>
                <td>
                    {% if imagen.dia_semana %}
                    <span class="badge bg-secondary">{{ imagen.get_dia_semana_display }}</span>
                    {% else %}
                    <span class="text-muted">-</span>
                    {% endif %}
                </td>
                <td class="text-center">
                    <span class="badge bg-info">{{ imagen.orden }}</span>
                </td>
                <td class="text-center">
                    {% if imagen.activo %}
                    <span class="badge-custom-active">
                                <i class="bi bi-check-circle"></i>
                                Activa
                            </span>
                    {% else %}
                    <span class="badge-custom-inactive">
                                <i class="bi bi-x-circle"></i>
                                Inactiva
                            </span>
                    {% endif %}
                </td>

                <td>
                    <div class="btn-group btn-group-sm" role="group">
                        <a href="{% url 'editar_imagen' imagen.pk %}" class="btn btn-sm btn-outline-primary btn-action"
                           title="Editar">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <a href="{% url 'toggle_activo' imagen.pk %}" class="btn btn-sm btn-outline-warning btn-action"
                           title="{% if imagen.activo %}Desactivar{% else %}Activar{% endif %}">
                            <i class="bi bi-{% if imagen.activo %}eye-slash{% else %}eye{% endif %}"></i>
                        </a>
                        <a href="{% url 'eliminar_imagen' imagen.pk %}" class="btn btn-sm btn-outline-danger btn-action"
                           title="Eliminar">
                            <i class="bi bi-trash"></i>
                        </a>
                    </div>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="text-center py-5">
        <i class="bi bi-image" style="font-size: 4rem; color: #ddd;"></i>
        <h5 class="mt-3 text-muted">No hay imágenes registradas</h5>
        <p class="text-muted">Comienza agregando tu primera imagen al carrusel</p>
        <a href="{% url 'crear_imagen' %}" class="btn btn-primary mt-3">
            <i class="bi bi-plus-circle me-2"></i>
            Agregar Primera Imagen
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}

